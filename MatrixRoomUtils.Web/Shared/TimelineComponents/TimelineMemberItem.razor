@using MatrixRoomUtils.Core.Responses
@using MatrixRoomUtils.Core.StateEventTypes

@if (roomMemberData.Membership == "ban") {
    <i>@Event.StateKey was banned</i>
}
else if (roomMemberData.Membership == "invite") {
    <i>@Event.StateKey was invited</i>
}
else if (roomMemberData.Membership == "join") {
    @if (Event.ReplacesState is not null) {
        <i>@Event.StateKey changed their display name to @(roomMemberData.Displayname ?? Event.Sender)</i>
    }
    else {
        <i><InlineUserItem UserId="@Event.StateKey"></InlineUserItem> joined</i>
    }
}
else if (roomMemberData.Membership == "leave") {
    <i>@Event.StateKey left</i>
}
else if (roomMemberData.Membership == "knock") {
    <i>@Event.StateKey knocked</i>
}
else {
    <i>@Event.StateKey has an unknown state:</i>
    <pre>
        @Event.ToJson()
    </pre>
}

@code {

    [Parameter]
    public StateEventResponse Event { get; set; }

    private RoomMemberEventData? roomMemberData => Event.TypedContent as RoomMemberEventData;

}